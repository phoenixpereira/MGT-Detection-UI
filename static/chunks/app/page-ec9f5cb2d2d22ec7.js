(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9162:function(){},2238:function(){},1544:function(){},794:function(){},1784:function(){},9840:function(e,t,a){Promise.resolve().then(a.bind(a,6958))},6958:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(6660),l=a(1631),r=a(7435);l.z.object({NEXT_PUBLIC_SHOW_LOGGER:l.z.enum(["true","false"]).optional()}).parse(r.env);var n=a(339),i=a(835),o=a.n(i);a(8181);var d=e=>{let{text:t,setOverallResult:a,setModel1Result:l,setModel2Result:r,setModel3Result:i,setIsSubmitted:o}=e,[d,c]=(0,n.useState)(!1),h=[{name:"Hello-SimpleAI/chatgpt-detector-roberta",label:"ChatGPT",setter:l},{name:"openai-community/roberta-large-openai-detector",label:"LABEL_0",setter:r},{name:"andreas122001/roberta-academic-detector",label:"machine-generated",setter:i}],u=async()=>{c(!0),o(!0);try{let e,s=[],l=Array(h.length).fill(0),r=Array(h.length).fill(0),n=[];for(let e=0;e<t.length;e+=705){let a=t.slice(e,e+705);s.push(a)}for(let e=0;e<h.length;e++){let t=h[e];for(let a of s){let s=await fetch("https://api-inference.huggingface.co/models/".concat(t.name),{method:"POST",body:JSON.stringify({inputs:a}),headers:{Authorization:"Bearer ".concat("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"),"Content-Type":"application/json"}});if(429===s.status)throw Error("Too many requests");if(503===s.status)throw Error("Service unavailable");let i=await s.json();if(Array.isArray(i[0]))for(let s of i[0])s.label===t.label&&(s.score=100*s.score,t.setter(s.score),l[e]+=s.score,r[e]++,console.log("Score:",s.score),s.score>50&&(n.push(a),console.log("Highlighted chunk:",a)))}}let i=l.reduce((e,t)=>e+t,0)/r.reduce((e,t)=>e+t,0);e=null===i?"Analysis result not available.":i<=10?"This text is highly likely to be human-generated.":i<=25?"This text is likely to be human-generated.":i<=40?"This text may be human-generated or machine-generated.":i<=60?"This text may be machine-generated or human-generated.":i<=75?"This text is likely to be machine-generated.":"This text is highly likely to be machine-generated.",a({machineGeneratedProbability:i,generatedText:e,highlightedChunks:n,textChunks:s})}catch(e){console.error("Error analysing text:",e),"Too many requests"===e.message?alert("Too many requests sent to the Hugging Face API, please try again in 15 minutes."):"Service unavailable"===e.message&&alert("Unable to connect to the models using the Hugging Face API, please reload the page and try again.")}finally{c(!1)}};return(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold mt-4 py-2 px-4 rounded-md",onClick:u,disabled:d,children:d?"Analysing...":"Analyse Text"})})},c=e=>{let{setOverallResult:t,setModel1Result:a,setModel2Result:l,setModel3Result:r,highlightedChunks:i,textChunks:c,isSubmitted:h,setIsSubmitted:u}=e,[x,g]=(0,n.useState)(""),m=e=>e.trim().split(/\s+/).length;return(0,s.jsx)("div",{children:!h&&(0,s.jsxs)("div",{className:"lg:p-8 p-4 border border-gray-300 rounded-md shadow-md",children:[(0,s.jsx)("p",{className:"mb-4 text-lg font-semibold",children:"Select a PDF or enter text."}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&o()(a).then(e=>{m(e)>2500?(alert("The text exceeds the 2500 word limit. Please upload a shorter document."),g("")):g(e)}).catch(e=>console.error("Failed to extract text from PDF",e))},className:"border border-gray-300 rounded-md p-2 w-full"})}),(0,s.jsx)("textarea",{id:"textInput",className:"border border-gray-300 rounded-md p-4 w-full",placeholder:"Enter text here...",onChange:e=>{let t=e.target.value;m(t)>2500?alert("The text exceeds the 2500 word limit. Please enter a shorter text."):g(t)},value:x}),""!==x.trim()&&(0,s.jsx)(d,{text:x,setOverallResult:t,setModel1Result:a,setModel2Result:l,setModel3Result:r,highlightedChunks:i,textChunks:c,setIsSubmitted:u})]})})};let h=e=>null===e?"#d3d3d3":e<=10?"#43aa8b":e<=25?"#90be6d":e<=40?"#f9c74f":e<=60?"#f8961e":e<=75?"#f3722c":"#f94144";var u=e=>{let{percentage:t,radius:a}=e,l=t||0,r=l.toFixed(2),n=h(l),i=2*Math.PI*a;return(0,s.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,s.jsx)("circle",{strokeWidth:"10",stroke:"#d3d3d3",fill:"transparent",r:a,cx:"50%",cy:"50%"}),(0,s.jsx)("circle",{strokeWidth:"10",strokeDasharray:i,strokeDashoffset:i-l/100*i,strokeLinecap:"round",stroke:"".concat(n),fill:"transparent",r:a,cx:"50%",cy:"50%"})]}),(0,s.jsx)("span",{className:"absolute text-black text-sm font-medium",children:"".concat(r,"%")})]})},x=function(e){let{info:t}=e,[a,l]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:"relative inline-block mr-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 flex items-center justify-center bg-white text-black border-2 border-black rounded-full cursor-pointer",onClick:()=>l(!a),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:"i"}),a&&(0,s.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 mt-2 px-4 py-2 text-sm text-white bg-black rounded shadow-lg z-10 w-64",children:t})]})},g=e=>{let{machineGeneratedProbability:t,generatedText:a,model1Result:l,model2Result:r,model3Result:n}=e;return t=((null!=l?l:0)+(null!=r?r:0)+(null!=n?n:0))/3,(0,s.jsx)("div",{className:"flex border border-gray-300 p-4 rounded-md shadow-md",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-row py-4 lg:py-0 border-b border-r-0 lg:border-r lg:border-b-0 border-gray-300 relative pr-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"mx-auto",children:(0,s.jsx)(u,{percentage:t,radius:55})})}),(0,s.jsxs)("div",{className:"px-4",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"Overall Machine Generated Probability"}),(0,s.jsx)("p",{className:"mt-2",children:a||"Please upload a file or enter text to analyse."})]}),(0,s.jsx)(x,{info:"The probability score is calculated as the average of individual model scores, with each model weighted equally."})]}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"Individual Model Machine Generated Probability"}),(0,s.jsxs)("div",{className:"mt-2 lg:mt-0 flex flex-row gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mx-auto",children:(0,s.jsx)(u,{percentage:l,radius:45})}),(0,s.jsx)("p",{className:"text-center",children:"Model 1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mx-auto",children:(0,s.jsx)(u,{percentage:r,radius:45})}),(0,s.jsx)("p",{className:"text-center",children:"Model 2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mx-auto",children:(0,s.jsx)(u,{percentage:n,radius:45})}),(0,s.jsx)("p",{className:"text-center",children:"Model 3"})]}),(0,s.jsx)(x,{info:"This score represents the probability that the text is machine-generated, as assessed by each individual model."})]})]})]})})},m=e=>{let t,a,{textChunks:l,highlightedChunks:r}=e;return(0,s.jsxs)("div",{className:"flex p-4 border border-gray-300 rounded-md shadow-md",children:[(0,s.jsx)("div",{children:(t=[],a=0,l.forEach((e,n)=>{r.includes(e)?t.push((0,s.jsx)("span",{style:{backgroundColor:"yellow"},children:l[n]},"highlighted_".concat(n))):t.push((0,s.jsx)("span",{children:l[n]},"normal_".concat(n))),a+=l[n].length}),a<l.length&&t.push((0,s.jsx)("span",{children:l.slice(a)},"remaining")),t)}),(0,s.jsx)(x,{info:"Chunks of text that the models believe are machine-generated are highlighted."})]})},b=a(5813),f=a(9920);b.ZP.register(f.Z);var p=e=>{let{userText:t}=e,a={avgSentenceLengthRef:(0,n.useRef)(null),lexicalDiversityRef:(0,n.useRef)(null)},[l,r]=(0,n.useState)({}),[i,o]=(0,n.useState)({}),d=e=>{let t=e.split(/[.!?]/);return t.reduce((e,t)=>e+t.trim().split(/\s+/).length,0)/t.length},c=e=>{let t=e.trim().split(/\s+/);return new Set(t).size/t.length};(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://phoenixpereira.me/MGT-Detection-UI","/combined_analysis.json")),t=await e.json();r({lexicalDiversity:t.human.lexical_diversity_ranges,avgSentenceLength:t.human.avg_sentence_length_ranges}),o({lexicalDiversity:t.ai.lexical_diversity_ranges,avgSentenceLength:t.ai.avg_sentence_length_ranges})}catch(e){console.error("Error fetching data:",e)}})()},[]),(0,n.useEffect)(()=>{Object.keys(l).length>0&&Object.keys(i).length>0&&h()},[l,i]);let h=()=>{u("Lexical Diversity",a.lexicalDiversityRef,l.lexicalDiversity,i.lexicalDiversity,18.5*c(t)),u("Average Sentence Length",a.avgSentenceLengthRef,l.avgSentenceLength,i.avgSentenceLength,.2*d(t))},u=(e,t,a,s,l)=>{if(t.current){let r=t.current.getContext("2d");if(r){let n=Object.keys(a);t.current.chart&&t.current.chart.destroy(),t.current.chart=new b.ZP(r,{type:"line",data:{labels:n,datasets:[{label:"Human",data:n.map(e=>a[e]),backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",fill:!0,tension:.4},{label:"AI",data:n.map(e=>s[e]),backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",fill:!0,tension:.4}]},options:{scales:{x:{type:"category",labels:n,ticks:{maxTicksLimit:10}},y:{beginAtZero:!0,suggestedMin:"Average Sentence Length"===e?0:void 0,suggestedMax:"Average Sentence Length"===e?100:1}},plugins:{title:{display:!0,text:e},annotation:{annotations:[{type:"line",scaleID:"x",value:l,borderColor:"black",borderWidth:3}]}}}})}}};return(0,s.jsxs)("div",{className:"border border-gray-300 p-4 lg:p-8 rounded-md shadow-md",children:[(0,s.jsx)("h3",{children:"Text Statistics"}),(0,s.jsx)("p",{children:"To read the area curves below, observe the red for Machine Generated Text (MGT) distribution and blue for Human Generated Text (HGT). The black vertical line denotes the count of the related statistic for the text. Text that is more machine-generated would have this line align closer with the peak of the red distribution."}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex mr-8",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("h4",{children:"Average Sentence Length"}),(0,s.jsx)("canvas",{ref:a.avgSentenceLengthRef})]}),(0,s.jsx)(x,{info:"The average sentence length is the average number of words per sentence in the text."})]}),(0,s.jsxs)("div",{className:"flex mr-8",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("h4",{children:"Lexical Diversity"}),(0,s.jsx)("canvas",{ref:a.lexicalDiversityRef})]}),(0,s.jsx)(x,{info:"The lexical diversity is a measure of how many different words appear in a text. It is the ratio of unique lexical items divided by the total number of words in the text."})]})]})]})};function v(){let[e,t]=(0,n.useState)({machineGeneratedProbability:null,generatedText:null,highlightedChunks:[],textChunks:[]}),[a,l]=(0,n.useState)(null),[r,i]=(0,n.useState)(null),[o,d]=(0,n.useState)(null),[h,u]=(0,n.useState)(!1);return console.log("https://phoenixpereira.me/MGT-Detection-UI"),(0,s.jsxs)("div",{className:"container mx-auto p-8",children:[(0,s.jsxs)("div",{className:"border border-gray-300 p-4 lg:p-8 rounded-md shadow-md",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Machine Generated Text (MGT) Detector"}),(0,s.jsx)("p",{children:"This is a MGT detector that uses multiple existing MGT detection models and text statistics to more accurately determine if text is machine-generated or not."}),!h&&(0,s.jsx)("p",{className:"mt-2",children:"Start by selecting a PDF or manually entering text."}),e.generatedText&&h&&(0,s.jsx)("button",{onClick:()=>{window.location.reload()},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4",children:"Start again"}),!e.generatedText&&h&&(0,s.jsx)("p",{className:"font-bold mt-2",children:"Please wait, the text is being analysed..."})]}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[h&&(0,s.jsx)(g,{machineGeneratedProbability:e.machineGeneratedProbability,generatedText:e.generatedText,model1Result:a,model2Result:r,model3Result:o}),(0,s.jsx)(c,{setOverallResult:t,setModel1Result:l,setModel2Result:i,setModel3Result:d,highlightedChunks:e.highlightedChunks,textChunks:e.textChunks,isSubmitted:h,setIsSubmitted:u}),e.generatedText&&(0,s.jsx)(p,{userText:e.textChunks.join(" ")}),e.highlightedChunks.length>0&&(0,s.jsx)(m,{textChunks:e.textChunks,highlightedChunks:e.highlightedChunks})]})]})}}},function(e){e.O(0,[47,607,37,734,703,456,744],function(){return e(e.s=9840)}),_N_E=e.O()}]);